<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script type="text/javascript" src="../jquery-3.5.1.js"></script>
	<script type="text/javascript" src="js/register2.js"></script>
</head>
<body>
	<div class="register_con">

		<div class="r_con fr">
			<div class="reg_title clearfix">
				<h1>用户注册</h1>
			</div>
			<div class="reg_form clearfix">
				<form id='myform'>
				<ul>
                    <li>
						<label>邮箱:</label>
						<input type="text" name="email" id="email">
						<span class="error_tip">提示信息</span>
					</li>				
					<li>
						<label>密码:</label>
						<input type="password" name="pwd" id="pwd">
						<span class="error_tip">提示信息</span>
					</li>
					<li class="reg_sub">
						<input type="submit" value="注 册" name="">
					</li>
				</ul>				
				</form>
			</div>

		</div>

	</div>

    <script>
	$(function () {
        // 定义开关变量
        var flagCpwd=false
        var flagEmail=false
    
        // 找到所在标签元素
        var $pwd=$('#pwd')
        var $email=$('#email')
    

    
            // 2.如果密码框失去焦点，则进行检查判断密码是否合法
        $pwd.blur(function(){
            // 封装函数，调用函数
            fnCheckPwd()
        })

        function fnCheckPwd(){
            // 获取密码框输入的数据
            var vals=$pwd.val()
            // 密码正则匹配表达式
            var rePass = /^[\w!-@#$%^&*]{6,20}$/
            // 如果输入框为空，则提示不能为空并return
            if (vals==''){
                $pwd.next().show().html('密码不能为空')
                flagPwd=false
                return
            }
            // 正则验证密码输入是否合法
            if(rePass.test(vals))
            {
                // 如果匹配成功，则隐藏span标签
                $pwd.next().hide()
                flagPwd=true
            }
            else
            {
                // 如果匹配失败，则显示span标签，替换提示信息
                $pwd.next().show().html('密码是6到20位字母、数字，还可包含@!#$%^&*-字符')
                flagPwd=false
            }
        }
    
        // 4.如果邮箱框失去焦点，则进行检查判断邮箱是否合法
        $email.blur(function(){
            // 封装函数，调用函数
            fnCheckEmail()
        })

        function fnCheckEmail(){
            // 获取邮箱框输入的数据
            var vals=$email.val()
            // 邮箱正则匹配表达式
            var reMail = /^[a-z0-9][\w\.\-]*@[a-z0-9\-]+(\.[a-z]{2,5}){1,2}$/i
            // 如果输入框为空，则提示不能为空并return
            if (vals==''){
                $email.next().show().html('邮箱不能为空')
                flagEmail=false
                return
            }
            // 正则验证邮箱输入是否合法
            if(reMail.test(vals))
            {
                // 如果匹配成功，则隐藏span标签
                $email.next().hide()
                flagEmail=true
            }
            else
            {
                // 如果匹配失败，则显示span标签，替换提示信息
                $email.next().show().html('你输入的邮箱格式不正确')
                flagEmail=false
            }
        }
        
    
        // 6.所有输入框验证通过再提交注册
        $submit.submit(function(){
            if(flagUser && flagPwd && flagCpwd && flagEmail && flagAllow){
                alert('OK!')
            }
            else{
                alert("Not OK!")
                return false
            }
        })
    })
</script>
    
</body>
</html>
